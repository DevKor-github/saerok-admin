<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_head :: head('새록 어드민 로그인')}"></head>
<body class="d-flex align-items-center justify-content-center" style="min-height: 100vh; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);">
<div class="card shadow-lg border-0" style="min-width: 360px; max-width: 420px;">
    <div class="card-body p-4 p-md-5">
        <div class="text-center mb-4">
            <img class="login-logo"
                 th:src="@{/images/saerok-admin-icon.png}"
                 src="/images/saerok-admin-icon.png"
                 alt="새록 어드민 로고"
                 decoding="async">
            <div class="d-flex align-items-center justify-content-center gap-2 mt-3 flex-wrap">
                <h1 class="h4 fw-bold mb-0">새록 어드민</h1>
                <span class="environment-badge"
                      th:if="${environmentProfileBadge}"
                      th:classappend="' ' + ${environmentProfileBadge.cssClass()}"
                      th:text="${environmentProfileBadge.label()}">운영</span>
            </div>
            <p class="text-muted small mb-0">운영자 전용 로그인 페이지입니다.</p>
        </div>

        <div class="alert alert-danger d-flex align-items-start" role="alert" th:if="${param.error}">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div th:switch="${param.error[0]}">
                <span th:case="'state'">보안 검증에 실패했습니다. 다시 로그인해주세요.</span>
                <span th:case="'callback'">필수 인증 정보가 누락되었습니다. 다시 시도해주세요.</span>
                <span th:case="'session'">세션이 만료되었습니다. 다시 로그인해주세요.</span>
                <span th:case="'login'">
                    <span th:if="${param.message}" th:text="${param.message[0]}"></span>
                    <span th:unless="${param.message}">로그인 중 오류가 발생했습니다. 다시 시도해주세요.</span>
                </span>
                <span th:case="*">로그인에 실패했습니다. 다시 시도해주세요.</span>
            </div>
        </div>

        <div class="d-grid gap-3">
            <a th:href="${kakaoAuthUrl}"
               class="btn btn-lg w-100 d-flex align-items-center justify-content-center gap-2"
               role="button"
               style="background-color: #FEE500; color: #191600;"
               aria-label="카카오 계정으로 로그인">
                <img th:src="@{/images/kakao-symbol.svg}" src="/images/kakao-symbol.svg" alt="카카오 심볼" width="20" height="20">
                <span class="fw-semibold">카카오로 로그인</span>
            </a>

            <div class="tooltip-wrapper"
                 data-bs-toggle="tooltip"
                 data-bs-placement="top"
                 data-bs-title="추후 제공 예정인 기능">
                <button type="button"
                        class="btn btn-lg w-100 d-flex align-items-center justify-content-center gap-2 upcoming-feature"
                        style="background-color: #000000; color: #ffffff;"
                        aria-disabled="true" disabled>
                    <i class="bi bi-apple fs-4" aria-hidden="true"></i>
                    <span class="fw-semibold">Sign in with Apple</span>
                </button>
            </div>
        </div>
    </div>
</div>

<th:block th:replace="~{fragments/_scripts :: scripts}"></th:block>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        if (!window.bootstrap || !window.bootstrap.Tooltip) return;

        document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(function (triggerEl) {
            var existingTooltip = window.bootstrap.Tooltip.getInstance(triggerEl);
            if (existingTooltip) existingTooltip.dispose();

            new window.bootstrap.Tooltip(triggerEl, {
                trigger: 'hover focus',
                delay: { show: 0, hide: 100 },
                customClass: 'tooltip-bubble'
            });
        });
    });
</script>

<style>
    .login-logo {
        inline-size: clamp(64px, 12vw, 96px);
        block-size: clamp(64px, 12vw, 96px);
        display: inline-block;
    }
</style>
</body>
</html>
