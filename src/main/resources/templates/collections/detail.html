<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(${pageTitle}, ${activeMenu}, ${breadcrumbs}, ~{::content})}">
<th:block th:fragment="content">
        <div class="row g-4">
            <div class="col-12 col-lg-8">
                <div class="card card-elevated mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <img th:src="${detail.avatarUrl()}" alt="작성자" class="rounded-circle me-3" width="56" height="56">
                            <div>
                                <h2 class="h5 mb-0" th:text="${detail.author()}">솔바람</h2>
                                <div class="text-muted small">작성 <span th:text="${#temporals.format(detail.createdAt(), 'yyyy.MM.dd HH:mm')}">2024.06.01</span> · 업데이트 <span th:text="${#temporals.format(detail.updatedAt(), 'yyyy.MM.dd HH:mm')}">2024.06.02</span></div>
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-2 mb-4">
                            <span class="badge rounded-pill" th:classappend="${detail.status()} == '공개' ? ' text-bg-success' : (${detail.status()} == '비공개' ? ' text-bg-secondary' : ' text-bg-danger')"
                                  th:text="${detail.status()}">공개</span>
                            <span class="badge text-bg-light"><i class="bi bi-flag me-1 text-danger"></i>신고 <span th:text="${detail.reportCount()}">3</span>건</span>
                            <span class="badge text-bg-light" th:each="tag : ${detail.tags()}" th:text="${tag}">태그</span>
                        </div>
                        <div class="bg-light rounded-4 p-4 lh-lg" th:text="${detail.content()}">본문 내용</div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4">
                <div class="card card-elevated mb-4">
                    <div class="card-body">
                        <h3 class="h6 fw-semibold mb-3">빠른 조치</h3>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#statusModal">상태 변경</button>
                            <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">새록 삭제</button>
                            <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#notifyModal">작성자 알림</button>
                        </div>
                    </div>
                </div>
                <div class="card card-elevated">
                    <div class="card-body">
                        <h3 class="h6 fw-semibold mb-3">활동 요약</h3>
                        <ul class="list-unstyled small text-muted mb-0">
                            <li class="mb-2"><i class="bi bi-journal-text me-2 text-primary"></i>등록 새록 48건</li>
                            <li class="mb-2"><i class="bi bi-chat-square-text me-2 text-success"></i>댓글 126건</li>
                            <li><i class="bi bi-flag me-2 text-danger"></i>누적 신고 5건</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="statusModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">상태 변경</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p><strong th:text="${detail.author()}">솔바람</strong>님의 새록 상태를 변경합니다.</p>
                        <select class="form-select">
                            <option>공개</option>
                            <option>비공개</option>
                            <option>차단</option>
                        </select>
                        <div class="mt-3">
                            <label class="form-label">조치 메모</label>
                            <textarea class="form-control" rows="3" placeholder="사유를 입력하세요."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-toast-target="toastCollectionAction">저장</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">새록 삭제</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>새록 <strong th:text="${'#' + detail.id()}">#872</strong>를 삭제하시겠습니까? 삭제 시 본문은 비공개 처리됩니다.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" data-toast-target="toastCollectionBulk">삭제</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="notifyModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">작성자 알림</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p><strong th:text="${detail.author()}">솔바람</strong>님에게 발송할 메시지를 작성하세요.</p>
                        <textarea class="form-control" rows="4" placeholder="안내 메시지"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-success" data-bs-dismiss="modal" data-toast-target="toastCollectionAction">알림 발송</button>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
</html>
