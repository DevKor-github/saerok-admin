<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(${pageTitle}, ${activeMenu}, ${breadcrumbs}, ~{::content})}">
<th:block th:fragment="content">
        <div class="row g-4">
            <div class="col-12 col-xl-8">
                <div class="card card-shadow-sm border-0">
                    <div class="card-body">
                        <form class="row g-4">
                            <div class="col-12">
                                <label class="form-label fw-semibold">제목</label>
                                <input type="text" class="form-control form-control-lg" placeholder="예) 새록 주간 소식 안내">
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-semibold">본문 내용</label>
                                <textarea class="form-control" rows="8" placeholder="알림 본문을 입력하세요."></textarea>
                                <div class="form-text">마크다운 문법을 지원합니다.</div>
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-semibold">타겟 대상</label>
                                <div class="list-group">
                                    <label class="list-group-item list-group-item-action d-flex justify-content-between align-items-start" th:each="option : ${targetOptions}">
                                        <div class="me-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="target" th:value="${option.value()}" th:checked="${option.value() == 'ALL'}">
                                                <span class="ms-2 fw-semibold" th:text="${option.label()}">전체</span>
                                            </div>
                                            <small class="text-muted" th:text="${option.description()}">설명</small>
                                        </div>
                                        <span class="badge text-bg-light">예상 1,248명</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-semibold">예약 발송</label>
                                <div class="row g-3 align-items-center">
                                    <div class="col-md-4">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="scheduleToggle">
                                            <label class="form-check-label" for="scheduleToggle">예약 발송 사용</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="date" class="form-control" disabled id="scheduleDate">
                                    </div>
                                    <div class="col-md-4">
                                        <input type="time" class="form-control" disabled id="scheduleTime">
                                    </div>
                                </div>
                                <div class="form-text">예약 발송을 사용하지 않으면 즉시 발송됩니다.</div>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer bg-white border-0 d-flex justify-content-between align-items-center">
                        <div class="text-muted small">최근 발송: 2024.05.30 · 알림 1,026명 수신</div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#previewModal">미리보기</button>
                            <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#sendConfirmModal">발송</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-xl-4">
                <div class="card card-shadow-sm border-0 mb-4">
                    <div class="card-body">
                        <h3 class="h6 fw-semibold mb-3">발송 가이드</h3>
                        <ul class="list-unstyled small text-muted mb-0">
                            <li class="mb-2"><i class="bi bi-check2-circle text-success me-2"></i>하루 최대 3회 발송 권장</li>
                            <li class="mb-2"><i class="bi bi-check2-circle text-success me-2"></i>예약 발송은 최대 30일 이내</li>
                            <li><i class="bi bi-check2-circle text-success me-2"></i>민감 정보 포함 여부 재검토</li>
                        </ul>
                    </div>
                </div>
                <div class="card card-shadow-sm border-0">
                    <div class="card-body">
                        <h3 class="h6 fw-semibold mb-3">최근 발송 로그</h3>
                        <ul class="list-unstyled small text-muted mb-0">
                            <li class="mb-2">2024.05.30 20:00 · 주간 업데이트 · 1,026명</li>
                            <li class="mb-2">2024.05.28 09:00 · 시스템 점검 안내 · 982명</li>
                            <li>2024.05.25 18:30 · 신규 기능 소개 · 1,201명</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">알림 미리보기</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="border rounded-4 p-4 bg-light">
                            <h4 class="fw-semibold">[미리보기] 새록 주간 소식 안내</h4>
                            <p class="text-muted">안녕하세요, 사록 운영팀입니다.</p>
                            <p>이번 주 업데이트와 주요 소식을 안내드립니다. 자세한 내용은 링크를 통해 확인하세요.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">닫기</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-toast-target="toastNotificationPreview">미리보기 확인</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="sendConfirmModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">알림 발송 확인</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>선택된 타겟에게 알림을 발송하시겠습니까?</p>
                        <p class="small text-muted mb-0">발송 후 취소가 불가능하니 메시지를 다시 한번 확인해주세요.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-toast-target="toastNotificationSent">발송</button>
                    </div>
                </div>
            </div>
        </div>
    <script>
    const scheduleToggle = document.getElementById('scheduleToggle');
    const scheduleDate = document.getElementById('scheduleDate');
    const scheduleTime = document.getElementById('scheduleTime');
    if (scheduleToggle) {
        scheduleToggle.addEventListener('change', () => {
            const enabled = scheduleToggle.checked;
            if (scheduleDate) scheduleDate.disabled = !enabled;
            if (scheduleTime) scheduleTime.disabled = !enabled;
        });
    }
    </script>
</th:block>
</html>
